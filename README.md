# WaCoDiS Datasource Observer
![Build](https://github.com/WaCoDiS/datasource-observer/workflows/Build/badge.svg)  
Observer component for data model supported SubsetJobDefinitions.
  
The WaCoDiS Metadata Connector component provides routines for handling DataEnvelope creation events in order to connect 
to the DataAccess API for creating new metadata resources.

**Table of Content**  
TODO  


## WaCoDiS Project Information
<p align="center">
  <img src="https://raw.githubusercontent.com/WaCoDiS/apis-and-workflows/master/misc/logos/wacodis.png" width="200">
</p>
Climate changes and the ongoing intensification of agriculture effect in increased material inputs in watercourses and dams.
Thus, water industry associations, suppliers and municipalities face new challenges. To ensure an efficient and environmentally
friendly water supply for the future, adjustments on changing conditions are necessary. Hence, the research project WaCoDiS
aims to geo-locate and quantify material outputs from agricultural areas and to optimize models for sediment and material
inputs (nutrient contamination) into watercourses and dams. Therefore, approaches for combining heterogeneous data sources,
existing interoperable web based information systems and innovative domain oriented models will be explored.

### Architecture Overview

For a detailed overview about the WaCoDiS system architecture please visit the 
**[WaCoDiS Core Engine](https://github.com/WaCoDiS/core-engine)** repository.  

## Overview  
The WaCoDiS Metadata Connector is an intermediate component with the scope to handle asynchronous DataEnvelope creation
events in order to interact with the DataAccess API for creating new metadata resources. Therefore, the Metadata Connector
subscribes for DataEnvelope creation messages at a message broker which are published by the 
**[Datasource Observer](https://github.com/WaCoDiS/datasource-observer)** if new required datasets are found. Following,
the Metadata Connector checks whether metadata for the found datasets have been already registered at the 
**[Data Access API](https://github.com/WaCoDiS/data-access-api)** or not and creates or updates corresponding metadata
information.
### Modules
The WaCoDiS Metadata Connector comprises three Maven modules:
* __WaCoDiS Metadata Connector Models__  
This module contains Java classes that reflect the basic data model. This includes the data types specified with OpenAPI
in the WaCoDiS apis-and workflows repository. All model classes were generated by the OpenAPI Generator, which is integrated
and can be used as Maven Plugin within this module.  
* __WaCoDiS Metadata Listener__  
This module is responsible for the message broker subscription as well as the interconnection to the Data Access API.
In addition, for each DataEnvelope type it contains a separate metadata update strategy.  
* __WaCoDiS Metadata Connector App__ 
Since WaCoDiS Metadata Connector is implemented as Spring Boot application, the App module provides the application runner
as well as default externalized configurations.
### Technologies
* __Java__  
WaCoDiS Metadata Connector is tested with Oracle JDK 8 and OpenJDK 8. Unless stated otherwise later Java versions can be used as well.
* __Maven__  
This project uses the build-management tool [Apache Maven](https://maven.apache.org/)
* __Spring Boot__  
WaCoDiS Metadata Connector is a standalone application built with the [Spring Boot](https://spring.io/projects/spring-boot) 
framework. Therefore, it is not necessary to deploy WaCoDiS Data Access manually with a web server.  
* __Spring Cloud__  
[Spring Cloud](https://spring.io/projects/spring-cloud) is used for exploiting some ready-to-use features in order to implement
an event-driven workflow. In particular, [Spring Cloud Stream](https://spring.io/projects/spring-cloud-stream) is used
for subscribing to asynchronous messages within thw WaCoDiS system.
* __RabbitMQ__  
For communication with other WaCoDiS components of the WaCoDiS system the message broker [RabbitMQ](https://www.rabbitmq.com/)
is utilized. RabbitMQ is not part of WaCoDiS Metadata Connector and therefore [must be deployed separately](#preconditions).
* __OpenAPI__  
[OpenAPI](https://github.com/OAI/OpenAPI-Specification) is used for the specification of data models used within this project.

## Installation / Building Information
### Build from Source
In order to build the WaCoDiS Metadata Connector from source _Java Development Kit_ (JDK) must be available. Data Access 
is tested with Oracle JDK 8 and OpenJDK 8. Unless stated otherwise later JDK versions can be used.  

Since this is a Maven project, [Apache Maven](https://maven.apache.org/) must be available for building it. Then, you
can build the project by running `mvn clean install` from root directory

### Build using Docker
The project contains a Dockerfile for building a Docker image. Simply run `docker build -t wacodis/metadata-connector:latest .`
in order to build the image. You will find some detailed information about running the Metadata Connector as Docker container
within the [run section](#using-docker) .

### Configuration
Configuration is fetched from [WaCoDiS Config Server](https://github.com/WaCoDiS/config-server). If config server is not
available, configuration values located at *src/main/resources/application.yml* within the Metadata Connector App submodule
are applied instead.   
#### Parameters
TODO
Describe configuration parameters


### Deployment
TODO
This section describes deployment scenarios, options and preconditions.

## User Guide
TODO
Describe how to run and use this component

## Contribution - Developer Information
This section contains information for developers.

### How to Contribute
TODO
Describe how to extend this module

### Branching
The master branch provides sources for stable builds. The develop branch represents the latest (maybe unstable) state of development.

### License and Third Party Lib POM Plugins
[optional]

## Contact
|    Name   |   Organization    |    Mail    |
| :-------------: |:-------------:| :-----:|
| Sebastian Drost | Bochum University of Applied Sciences | sebastian.drost@hs-bochum.de |
| Arne Vogt | Bochum University of Applied Sciences | arne.vogt@hs-bochum.de |
| Andreas Wytzisk  | Bochum University of Applied Sciences | andreas.wytzisk@hs-bochum.de |
| Matthes Rieke | 52째 North GmbH | m.rieke@52north.org |

## Credits and Contributing Organizations
- Department of Geodesy, Bochum University of Applied Sciences, Bochum
- 52째 North Initiative for Geospatial Open Source Software GmbH, M체nster
- Wupperverband, Wuppertal
- EFTAS Fernerkundung Technologietransfer GmbH, M체nster

The research project WaCoDiS is funded by the BMVI as part of the [mFund programme](https://www.bmvi.de/DE/Themen/Digitales/mFund/Ueberblick/ueberblick.html)  
<p align="center">
  <img src="https://raw.githubusercontent.com/WaCoDiS/apis-and-workflows/master/misc/logos/mfund.jpg" height="100">
  <img src="https://raw.githubusercontent.com/WaCoDiS/apis-and-workflows/master/misc/logos/bmvi.jpg" height="100">
</p>
